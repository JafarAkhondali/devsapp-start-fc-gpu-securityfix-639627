ROSTemplateFormatVersion: "2015-09-01"
Parameters:
  FileSystemId1:
    Type: String
    Description: nas (file system) id1
  FileSystemId2:
    Type: String
    Description: nas (file system) id2
  FileSystemId3:
    Type: String
    Description: nas (file system) id3
  FileSystemId4:
    Type: String
    Description: nas (file system) id4
  FileSystemId5:
    Type: String
    Description: nas (file system) id5
  FileSystemId6:
    Type: String
    Description: nas (file system) id6
  FileSystemId7:
    Type: String
    Description: nas (file system) id7
  FileSystemId8:
    Type: String
    Description: nas (file system) id8
  VSwitchId:
    Type: String
    Description: vswitch id
  VpcId:
    Type: String
    Description: vpc id
  SecurityGroupId:
    Type: String
    Description: security group id
  FuncNumber:
    Type: String
    Description: zone id
Conditions:
  hasFunc2:
    Fn::Or:
      - Fn::Equals:
        - Ref: FuncNumber
        - "2"
      - Fn::Equals:
        - Ref: FuncNumber
        - "3"
      - Fn::Equals:
        - Ref: FuncNumber
        - "4"
      - Fn::Equals:
        - Ref: FuncNumber
        - "5"
      - Fn::Equals:
        - Ref: FuncNumber
        - "6"
      - Fn::Equals:
        - Ref: FuncNumber
        - "7"
      - Fn::Equals:
        - Ref: FuncNumber
        - "8"
  hasFunc3:
    Fn::Or:
      - Fn::Equals:
        - Ref: FuncNumber
        - "3"
      - Fn::Equals:
        - Ref: FuncNumber
        - "4"
      - Fn::Equals:
        - Ref: FuncNumber
        - "5"
      - Fn::Equals:
        - Ref: FuncNumber
        - "6"
      - Fn::Equals:
        - Ref: FuncNumber
        - "7"
      - Fn::Equals:
        - Ref: FuncNumber
        - "8"
  hasFunc4:
    Fn::Or:
      - Fn::Equals:
        - Ref: FuncNumber
        - "4"
      - Fn::Equals:
        - Ref: FuncNumber
        - "5"
      - Fn::Equals:
        - Ref: FuncNumber
        - "6"
      - Fn::Equals:
        - Ref: FuncNumber
        - "7"
      - Fn::Equals:
        - Ref: FuncNumber
        - "8"
  hasFunc5:
    Fn::Or:
      - Fn::Equals:
        - Ref: FuncNumber
        - "5"
      - Fn::Equals:
        - Ref: FuncNumber
        - "6"
      - Fn::Equals:
        - Ref: FuncNumber
        - "7"
      - Fn::Equals:
        - Ref: FuncNumber
        - "8"
  hasFunc6:
    Fn::Or:
      - Fn::Equals:
        - Ref: FuncNumber
        - "6"
      - Fn::Equals:
        - Ref: FuncNumber
        - "7"
      - Fn::Equals:
        - Ref: FuncNumber
        - "8"
  hasFunc7:
    Fn::Or:
      - Fn::Equals:
        - Ref: FuncNumber
        - "7"
      - Fn::Equals:
        - Ref: FuncNumber
        - "8"
  hasFunc8:
    Fn::Equals:
      - Ref: FuncNumber
      - "8"
Resources:
  Modelscope-MOUNT-TARGET-1:
    Type: "ALIYUN::NAS::MountTarget"
    Properties:
      FileSystemId:
        Ref: FileSystemId1
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-2:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc2
    Properties:
      FileSystemId:
        Ref: FileSystemId2
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-3:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc3
    Properties:
      FileSystemId:
        Ref: FileSystemId3
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-4:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc4
    Properties:
      FileSystemId:
        Ref: FileSystemId4
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-5:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc5
    Properties:
      FileSystemId:
        Ref: FileSystemId5
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-6:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc6
    Properties:
      FileSystemId:
        Ref: FileSystemId6
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-7:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc7
    Properties:
      FileSystemId:
        Ref: FileSystemId7
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
  Modelscope-MOUNT-TARGET-8:
    Type: "ALIYUN::NAS::MountTarget"
    Condition: hasFunc8
    Properties:
      FileSystemId:
        Ref: FileSystemId8
      AccessGroupName: DEFAULT_VPC_GROUP_NAME
      VSwitchId:
        Ref: VSwitchId
      VpcId:
        Ref: VpcId
      Status: Active
      SecurityGroupId:
        Ref: SecurityGroupId
      NetworkType: Vpc
Outputs:
  MT1:
    Value:
      "Fn::GetAtt":
        - Modelscope-MOUNT-TARGET-1
        - MountTargetDomain
  MT2:
    Value:
      Fn::If:
        - hasFunc2
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-2
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain
  MT3:
    Value:
      Fn::If:
        - hasFunc3
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-3
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain
  MT4:
    Value:
      Fn::If:
        - hasFunc4
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-4
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain
  MT5:
    Value:
      Fn::If:
        - hasFunc5
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-5
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain
  MT6:
    Value:
      Fn::If:
        - hasFunc6
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-6
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain
  MT7:
    Value:
      Fn::If:
        - hasFunc7
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-7
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain
  MT8:
    Value:
      Fn::If:
        - hasFunc8
        - "Fn::GetAtt":
            - Modelscope-MOUNT-TARGET-8
            - MountTargetDomain
        - "Fn::GetAtt":
            - !Join ['-', [Modelscope-MOUNT-TARGET,!Ref FuncNumber]] # use mount target of last stage in default
            - MountTargetDomain